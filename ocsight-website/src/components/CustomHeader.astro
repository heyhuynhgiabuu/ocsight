---
import { getRelativeLocaleUrl } from 'astro:intl';
import config from 'virtual:starlight/user-config';
import LanguageSelect from 'virtual:starlight/components/LanguageSelect';
import Search from 'virtual:starlight/components/Search';
import ThemeSelect from 'virtual:starlight/components/ThemeSelect';
import type { Props } from '../types';

const { locale, sidebar } = Astro.props;
---

<header class="sl-header">
  <div class="sl-header-start">
    <a href={getRelativeLocaleUrl(locale, '/')} class="sl-logo">
      {config.logo ? (
        <img
          src={typeof config.logo.src === 'string' ? config.logo.src : config.logo.src.light}
          alt={config.logo.alt}
          class="sl-logo-image"
        />
      ) : null}
      <span class="sl-logo-text">{config.title}</span>
    </a>
  </div>

  <div class="sl-header-end">
    <Search locale={locale} labels={config.search?.labels} />
    <ThemeSelect locale={locale} labels={config.theme?.labels} />
    <LanguageSelect locale={locale} labels={config.localization?.labels} />
    <div class="sl-header-actions">
      {config.social && (
        <div class="sl-social-links">
          {config.social.map(({ icon, href, label }) => (
            <a href={href} aria-label={label} class="sl-social-link">
              <svg class="sl-social-icon" viewBox="0 0 24 24" aria-hidden="true">
                <use href={`/icons.svg#${icon}`}></use>
              </svg>
            </a>
          ))}
        </div>
      )}
    </div>
  </div>
</header>

<style>
  .sl-header {
    @apply flex items-center justify-between py-4 px-6 border-b border-border bg-background;
  }

  .sl-header-start {
    @apply flex items-center gap-4;
  }

  .sl-logo {
    @apply flex items-center gap-2 text-xl font-mono font-bold text-foreground hover:text-primary transition-colors;
    text-decoration: none;
  }

  .sl-logo-image {
    @apply h-8 w-8;
  }

  .sl-header-end {
    @apply flex items-center gap-4;
  }

  .sl-social-links {
    @apply flex items-center gap-2;
  }

  .sl-social-link {
    @apply p-2 rounded border border-border hover:border-primary transition-colors;
    color: rgb(var(--color-muted-foreground));
  }

  .sl-social-link:hover {
    color: rgb(var(--color-primary));
  }
</style>